<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>1. Installing the Nervos CKB SDK · Nervos CKB</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;The SDK is provided to aid in the development of generator code by providing useful APIs. The mruby system cell is provided to enable us to deploy ruby scripts to cells and also exposes select APIs that allow us to do things like view all of the data in the transaction has triggered the script execution in the first place.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="1. Installing the Nervos CKB SDK · Nervos CKB"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.nervos.org/"/><meta property="og:description" content="&lt;p&gt;The SDK is provided to aid in the development of generator code by providing useful APIs. The mruby system cell is provided to enable us to deploy ruby scripts to cells and also exposes select APIs that allow us to do things like view all of the data in the transaction has triggered the script execution in the first place.&lt;/p&gt;
"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/code-block-buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/nervos-logo.png" alt="Nervos CKB"/><h2 class="headerTitleWithLogo">Nervos CKB</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/introduction/welcome" target="_self">Docs</a></li><li class="siteNavGroupActive"><a href="/tutorials/intro-tutorial" target="_self">Tutorial</a></li><li class=""><a href="https://github.com/nervosnetwork" target="_blank">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Tutorial</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Tutorial<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/tutorials/intro-tutorial">Overview</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/tutorials/step1">1. Installing the Nervos CKB SDK</a></li><li class="navListItem"><a class="navItem" href="/tutorials/step2">2. How to create a Wallet</a></li><li class="navListItem"><a class="navItem" href="/tutorials/step3">3. Mining native tokens</a></li><li class="navListItem"><a class="navItem" href="/tutorials/step4">4. Constructing a Cell</a></li><li class="navListItem"><a class="navItem" href="/tutorials/step5">5. Constructing a Transaction</a></li><li class="navListItem"><a class="navItem" href="/tutorials/step6">6. Transaction Signing</a></li><li class="navListItem"><a class="navItem" href="/tutorials/step7">7. Scripts</a></li><li class="navListItem"><a class="navItem" href="/tutorials/step8">8. Creating Lock Script</a></li><li class="navListItem"><a class="navItem" href="/tutorials/step9">9. Sending a transaction</a></li><li class="navListItem"><a class="navItem" href="/tutorials/step10">10. Retrieving Transaction Information</a></li><li class="navListItem"><a class="navItem" href="/tutorials/step11">11. Receiving Native Tokens</a></li><li class="navListItem"><a class="navItem" href="/tutorials/step12">12. Finishing up</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/nervosnetwork/docs/edit/master/docs/tutorials/step1.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">1. Installing the Nervos CKB SDK</h1></header><article><div><span><p>The SDK is provided to aid in the development of generator code by providing useful APIs. The mruby system cell is provided to enable us to deploy ruby scripts to cells and also exposes select APIs that allow us to do things like view all of the data in the transaction has triggered the script execution in the first place.</p>
<h1><a class="anchor" aria-hidden="true" id="11-download-the-sdk"></a><a href="#11-download-the-sdk" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.1 Download the SDK</h1>
<p>In order to begin working with the SDK we need to clone it from the master branch:</p>
<p>Start a new project in a folder called <strong>nervos_demos</strong>:</p>
<p><code>mkdir nervos_demos</code></p>
<p>Clone the CKB Ruby SDK in this folder:</p>
<p><code>git clone --recursive https://github.com/nervosnetwork/ckb-sdk-ruby</code></p>
<h1><a class="anchor" aria-hidden="true" id="12-installing-dependencies"></a><a href="#12-installing-dependencies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.2 Installing Dependencies</h1>
<p>The following dependencies are required to be able to run and execute the SDK</p>
<ul>
<li>bitcoin-secp256k1 gem</li>
<li>rbnacl gem</li>
<li>Manual install of secp256k1</li>
<li>libsodium library</li>
<li>Mruby Contract - this is required to compile and execute ruby c</li>
</ul>
<p>Follow the installation guide <a href="../tutorials/step1">here</a> to install them locally.</p>
<h1><a class="anchor" aria-hidden="true" id="13-install-sdk"></a><a href="#13-install-sdk" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.3 Install SDK</h1>
<p>Add this line to your application's Gemfile:</p>
<p><code>gem 'ckb-sdk-ruby', github: 'nervosnetwork/ckb-sdk-ruby', require: 'ckb'</code></p>
<pre><code class="hljs css language-$ cd ckb-sdk-ruby">$ <span class="hljs-keyword">bundle
</span></code></pre>
<h1><a class="anchor" aria-hidden="true" id="14-install-mruby-contract"></a><a href="#14-install-mruby-contract" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.4 Install mruby contract</h1>
<p>Mruby contract is required to compile and execute Ruby code in the CKB-VM. This will allow you to create, compile and execute the Scripts that we will be creating later in the tutorial.</p>
<p>Using the argv file you installed before at: /path/to/argv_source_entry . We can install the mruby contract here:</p>
<pre><code class="hljs css language-[1] pry(main)&gt; asw = Ckb::AlwaysSuccessWallet.new(api)">[<span class="hljs-number">2</span>] pry(main)&gt; conf = asw.install_mruby_cell!(<span class="hljs-string">"/path/to/argv_source_entry"</span>)
=&gt; {<span class="hljs-symbol">:ou</span>t_point=&gt;{<span class="hljs-symbol">:tx</span>_hash=&gt;<span class="hljs-string">"0x20b849ffe67eb5872eca0d68fff1de193f07354ea903948ade6a3c170d89e282"</span>, <span class="hljs-symbol">:in</span>dex=&gt;<span class="hljs-number">0</span>},
 <span class="hljs-symbol">:ce</span>ll_hash=&gt;<span class="hljs-string">"0x03dba46071a6702b39c1e626f469b4ed9460ed0ad92cf2e21456c34e1e2b04fd"</span>}
[<span class="hljs-number">3</span>] pry(main)&gt; asw.configuration_installed?(conf)
=&gt; <span class="hljs-built_in">false</span>
[<span class="hljs-number">3</span>] pry(main)&gt; # Wait a while till this becomes <span class="hljs-built_in">true</span>
[<span class="hljs-number">4</span>] pry(main)&gt; asw.configuration_installed?(conf)
=&gt; <span class="hljs-built_in">true</span>
</code></pre>
<h1><a class="anchor" aria-hidden="true" id="optional"></a><a href="#optional" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Optional:</h1>
<p>Now you have the mruby contract installed in CKB, and the relevant configuration in conf structure. You can inform api object to use this configuration:</p>
<pre><code class="hljs"><span class="hljs-selector-attr">[1]</span> <span class="hljs-selector-tag">pry</span>(main)&gt; <span class="hljs-selector-tag">api</span><span class="hljs-selector-class">.set_and_save_default_configuration</span>!(conf)
</code></pre>
<h1><a class="anchor" aria-hidden="true" id="15-successful-installation"></a><a href="#15-successful-installation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.5 Successful Installation</h1>
<p>Validate your successful installation by doing the following:</p>
<pre><code class="hljs css language-$ cd ckb-sdk-ruby">$ <span class="hljs-keyword">bundle
</span></code></pre>
<h1><a class="anchor" aria-hidden="true" id="16-create-gem-file-to-manage-dependencies"></a><a href="#16-create-gem-file-to-manage-dependencies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.6 Create Gem File to manage Dependencies</h1>
<p>Create a Gemfile and add the following dependencies to the Gemfile to be able to build the project.</p>
<pre><code class="hljs">ruby <span class="hljs-string">"2.4.1"</span>
<span class="hljs-meta">#gem <span class="hljs-string">'ckb-sdk-ruby'</span>, github: <span class="hljs-string">'nervosnetwork/ckb-sdk-ruby'</span>, require: <span class="hljs-string">'ckb'</span></span>
gem <span class="hljs-string">'minitest'</span>
<span class="hljs-meta">#gem <span class="hljs-string">'pry'</span></span>
gem <span class="hljs-string">'dotenv'</span>

<span class="hljs-meta"># Until ckb-sdk gem is ready:</span>

<span class="hljs-meta">#gem <span class="hljs-string">"bundler"</span>, <span class="hljs-string">"~&gt; 2.0"</span></span>
gem <span class="hljs-string">"rake"</span>, <span class="hljs-string">"~&gt; 10.0"</span>
gem <span class="hljs-string">"rspec"</span>, <span class="hljs-string">"~&gt; 3.0"</span>
gem <span class="hljs-string">"rubocop"</span>, <span class="hljs-string">"~&gt; 0.66.0"</span>
gem <span class="hljs-string">"pry"</span>, <span class="hljs-string">"~&gt; 0.12.2"</span>

gem <span class="hljs-string">"rbnacl"</span>, <span class="hljs-string">"~&gt; 6.0"</span>, <span class="hljs-string">"&gt;= 6.0.1"</span>
gem <span class="hljs-string">"bitcoin-secp256k1"</span>, <span class="hljs-string">"~&gt; 0.5.0"</span>
</code></pre>
<p>Now that we have all of our dependencies for the project set up, we will start creating a <strong>Wallet Class</strong> to hold our tokens.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 5/13/2019</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/tutorials/intro-tutorial"><span class="arrow-prev">← </span><span>Overview</span></a><a class="docs-next button" href="/tutorials/step2"><span>2. How to create a Wallet</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div></div></body></html>